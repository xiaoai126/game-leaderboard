### 目前已经实现功能：

- 分数更新 (updateScore): 透过 HTTP POST 请求 (/rank/update) 接收使用者 ID 和分数，使用 Redis 的 ZADD 指令更新排行榜。同时，透过 WebSocket 推送排名更新讯息给所有连线的用户。包含使用者ID、排名、以及更新后的分数与更新前的分数，方便前端判断排名变化。
- 查询排名 (getRank): 透过 HTTP GET 请求 (/rank) 接收使用者 ID，使用 Redis 的 ZREVRANK 指令查询使用者排名。
- 排行榜分页查询 (getLeaderboard): 透过 HTTP GET 请求 (/rank/leaderboard) 接收页码和每页数量参数，使用 Redis 的 ZREVRANGE 指令查询指定范围的排行榜资料，并同时回传使用者 ID 和分数。
- 查询周围排名 (getAround): 透过 HTTP GET 请求 (/rank/around) 接收使用者 ID 和查询数量参数，先取得目标使用者的排名，然后使用 Redis 的 ZREVRANGE 指令查询前后 N 名的玩家资料。
- WebSocket 实时推送 (rankUpdate event): 当分数更新时，伺服器会透过 WebSocket 的 rankUpdate 事件向所有连线的用户广播排名变更的讯息。
- 错误处理: 在 RankService 中加入了 try...catch 区块，处理 Redis 操作可能发生的错误，并使用 Logger 记录错误讯息。
- 跨域处理: 在WebSocketGateway加入cors配置，解决跨域问题。
- 上榜和超越通知: 目前只有推送排名变化，
- 断线重连机制: 在 WebSocket 中，当使用者断线时，需要重新连接到服务器。

### 尚未实现的功能，以及未來可以改進的方向

- 高并发处理: 目前的程式码使用单个 Redis 连线处理所有请求。在高并发的环境下，可能会成为效能瓶颈。建议使用 Redis 连线池、Pipeline 或 Lua 脚本来优化效能。也可以考虑使用消息伫列（例如 Bull 或 Redis 伫列）来处理分数更新请求，避免阻塞主执行绪。
- 排行榜资料快取: 为了进一步提升效能，可以在应用程式层使用快取（例如使用 Nest.js 的 CacheModule）来快取排行榜资料，减少对 Redis 的读取次数。
- 上榜和超越通知: 尚未实作上榜（从未上榜到进入排行榜）和超越（超越其他玩家）的独立通知。
- 断线重连机制: 虽然 WebSocket 有内建的断线重连机制，但应用程式层可以加入更完善的处理，例如在服务端维护连线状态，并在连线断开后清理相关资源。
- 更完善的错误处理和日志记录: 加入更详细的错误讯息和日志记录，方便追踪和除错。
- 单元测试和整合测试: 为了确保程式码的品质和稳定性，应该写单元测试和整合测试。

##### 总结:

- 目前的程式码提供了一个基本的游戏排行榜系统框架，包含分数更新、排名查询、分页查询、周围排名查询和 WebSocket 实时推送等功能。
